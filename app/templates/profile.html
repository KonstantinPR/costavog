{% extends 'base.html' %}
{% block add_style %}

{% endblock %}

{% block content %}
{{ super() }}


<main>
    <br>
    <!--    {% for cat, msg in get_flashed_messages(True) %}-->
    <!--    <div class="flash {{cat}} alert alert-primary align-items-center" role="alert">{{msg}}</div>-->
    <!--    {% endfor %}-->

    <div class="py-5 center">
        <h2>
            <div class="row p-2">
                <div>
                    Профайл. {{user_name}}
                    <br>
                    <span class='h3'>{{points}}</span> <span class='h5'>пнт</span>
                </div>
            </div>
        </h2>
    </div>

    {% if current_role == "administrator" %}

    <div class="row g-5">

        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-left">
            <h4 class="mb-3"></h4>
            <form class="needs-validation" action="{{url_for('profile')}}" method="post" novalidate>
                <div class="row">
                    <div class="col-xs-12  col-sm-12 col-lg-12 p-2">


                        <label for="roles">Доступ пользователя:</label>
                        <select id="roles" name="roles" class="form-select" aria-label="Доступ пользователя">
                            {% for role in roles %}
                            {% if role == current_role %}
                            {% set is_selected = 'selected' %}
                            {% else %}
                            {% set is_selected = '' %}
                            {% endif %}
                            <option {{is_selected}} value="{{role}}">{{role}}</option>
                            {% endfor %}
                        </select>
                        <br>


                        <label for="initial_sum">Баланс на начало периода, взятый из прошлой системы учета:</label>
                        <input autofocus type="number" class="form-control form-control-lg" id="initial_sum"
                               name="initial_sum"
                               placeholder="Баланс на начало периода, взятый из прошлой системы учета"
                               value="{{initial_sum}}"
                               required>
                        <br>
                        <label for="initial_file_path">Путь до файла excel по учету финансов с архивными
                            проводками:</label>
                        <input autofocus class="form-control form-control-lg" id="initial_file_path"
                               name="initial_file_path"
                               placeholder="Initial Excel file with old transactions" value="{{initial_file_path}}"
                               required>
                        <div class="invalid-feedback">
                            Valid first name is required.
                        </div>
                        <br>
                        <label for="initial_file_path">Yandex token (токен от Яндекс.Диска)</label>
                        <input autofocus class="form-control form-control-lg" id="yandex_disk_token"
                               name="yandex_disk_token"
                               placeholder="Yandex token (токен от Яндекс.Диска)" value="{{yandex_disk_token}}"
                               required>
                        <div class="invalid-feedback">
                            Введите токен яндекс.диска чтобы им пользоваться
                        </div>
                        <br>
                        <label for="initial_file_path">WB api token</label>
                        <input autofocus class="form-control form-control-lg" id="wb_api_token"
                               name="wb_api_token"
                               placeholder="API KEY WB (токен ключ от WB)" value="{{wb_api_token}}"
                               required>
                        <div class="invalid-feedback">
                            Введите api ключ от wildberries, чтобы использовать его статистику
                        </div>
                        <br>
                        <label for="initial_file_path">WB api token2 (новый токен)</label>
                        <input autofocus class="form-control form-control-lg" id="wb_api_token2"
                               name="wb_api_token2"
                               placeholder="API KEY WB (токен ключ от WB)" value="{{wb_api_token2}}"
                               required>
                        <div class="invalid-feedback">
                            Введите api ключ от wildberries, чтобы использовать его статистику
                        </div>
                        <div class="my-4"></div>
                        <button class="w-100 btn btn-primary btn-lg" type="submit">Изменить</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    {% endif %}

</main>


<footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1"></p>
    <ul class="list-inline">

    </ul>
</footer>


{% endblock %}

